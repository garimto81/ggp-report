# 일일 보고서 가이드

일일 보고서의 실행 방법과 특징을 상세히 설명합니다.

## 📅 일일 보고서란?

최근 24시간 동안의 카메라 파트 업무를 분석하여 요약한 보고서입니다.

### 주요 특징
- **수집 기간**: 실행 시점 기준 정확히 24시간 전부터
- **쓰레드 포함**: 모든 답글과 대화 컨텍스트 수집 (v1.2.0)
- **우선순위 정렬**: 긴급도에 따라 자동 정렬
- **AI 분석**: Gemini AI가 중요 업무만 추출

## 🚀 GitHub Actions로 실행하기

### 1단계: Actions 페이지 접속
https://github.com/garimto81/slack-report-automation/actions

### 2단계: 워크플로우 실행
1. **"Slack Reports"** 워크플로우 클릭
2. **"Run workflow"** 버튼 클릭 (오른쪽 상단)
3. 옵션 선택:
   ```
   Branch: main
   Report type: daily ← 이것을 선택!
   ```
4. 녹색 **"Run workflow"** 클릭

### 3단계: 실행 모니터링
- 🟠 **실행 중**: 1-3분 소요 (쓰레드 수에 따라 다름)
- ✅ **성공**: 모든 단계가 녹색 체크
- ❌ **실패**: 빨간색 X 표시 → 로그 확인 필요

### 4단계: 보고서 확인
Slack DM에서 다음과 같은 형식의 보고서 수신:

```
*일일 업무 보고*

• 긴급 카메라 수리 요청 처리 완료
• 신제품 촬영을 위한 스튜디오 세팅 진행
• 드론 배터리 교체 및 테스트 비행 실시
• 영상 편집 프로젝트 색보정 작업 완료
• 촬영 장비 정기 점검 일정 확정
```

## 📊 보고서 내용 구성

### 포함되는 정보
1. **긴급 업무** (우선순위 1)
   - 장비 고장, 긴급 클라이언트 요청

2. **예정된 촬영** (우선순위 2)
   - 스케줄된 촬영, 프로젝트 진행

3. **장비 관리** (우선순위 3)
   - 점검, 청소, 정비

4. **후반 작업** (우선순위 4)
   - 편집, 색보정, 렌더링

5. **일반 업무** (우선순위 5)
   - 행정, 보고, 기타

### 제외되는 정보
- 카메라 파트와 무관한 대화
- 단순 인사나 잡담
- 24시간 이전의 메시지

## 🧵 쓰레드 메시지 처리

### v1.2.0 업데이트
- **전체 대화 수집**: 메인 메시지와 모든 답글 포함
- **시간 필터링**: 24시간 내의 답글만 수집
- **구조 표시**: AI가 쓰레드 구조를 이해하여 분석

### 예시
```
원본 대화:
김팀장: 내일 촬영 장비 점검 부탁드립니다 (답글 3개)
  └─ 이대리: 카메라 렌즈 청소 포함인가요? (답글)
  └─ 김팀장: 네, 전체 점검 부탁드려요 (답글)
  └─ 이대리: 알겠습니다. 오전에 진행하겠습니다 (답글)

↓ AI 분석 후 보고서

• 촬영 장비 전체 점검 및 렌즈 청소 예정 (오전 진행)
```

## ⏰ 자동 실행 스케줄

### 현재 설정
- **평일(화-금)**: 오전 10시 KST
- **월요일**: 주간/월간 보고서 우선
- **주말**: 실행 안 함

### 스케줄 변경하기
`.github/workflows/reports.yml` 파일 수정:
```yaml
schedule:
  - cron: '0 1 * * 2-5'  # 한국시간 오전 10시 (화-금)
```

## 🔧 문제 해결

### 보고서가 도착하지 않음
1. **Actions 로그 확인**: 오류 메시지 찾기
2. **환경 변수 확인**: `SLACK_DM_USER_IDS` 설정
3. **봇 권한 확인**: 채널 멤버 여부

### 실행 시간이 너무 오래 걸림
- 쓰레드가 많은 경우 정상
- 5분 이상 걸리면 타임아웃 조정 필요

### 메시지가 누락됨
1. **1000개 제한**: 24시간 내 메시지가 1000개 초과
2. **쓰레드 제한**: 쓰레드당 100개 답글 제한
3. **권한 문제**: 봇이 특정 메시지 접근 불가

## 💡 활용 팁

### 효과적인 보고서 활용
1. **매일 같은 시간 확인**: 루틴화하여 업무 파악
2. **우선순위 확인**: 긴급 업무부터 처리
3. **팀 공유**: 필요시 팀 채널에 전달

### 보고서 품질 향상
1. **명확한 메시지**: 슬랙에 구체적으로 작성
2. **쓰레드 활용**: 관련 대화는 쓰레드로
3. **키워드 사용**: 촬영, 장비, 편집 등

## 📝 로컬 테스트

개발 환경에서 테스트:
```bash
# 환경 변수 설정
export SLACK_DM_USER_IDS=U1234567890,U0987654321

# 일일 보고서 생성
node dist/src/generate-report.js --type daily
```

## 🔗 관련 문서

- [전체 가이드](README.md)
- [GitHub Actions 상세](GITHUB_ACTIONS_GUIDE.md)
- [문제 해결](troubleshooting-guide.md)
- [기술 상세](TECHNICAL_DETAILS.md)